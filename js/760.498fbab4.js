"use strict";(self["webpackChunkgeoview"]=self["webpackChunkgeoview"]||[]).push([[760],{7794:function(e,l,s){s.r(l),s.d(l,{default:function(){return ke}});var a=s(3396),i=s(7139);const t=e=>((0,a.dD)("data-v-9159aede"),e=e(),(0,a.Cn)(),e),o=t((()=>(0,a._)("div",{id:"sub-title"},[(0,a.Uk)(" 地物分类"),(0,a._)("i",{class:"iconfont icon-dianji"})],-1))),n=(0,a.uE)('<p data-v-9159aede> 请上传包含<span class="go-bold" data-v-9159aede>图片的文件夹</span><i class="iconfont icon-wenjianjia" data-v-9159aede></i>或者<span class="go-bold" data-v-9159aede>图片</span><i class="iconfont icon-tupiantianjia" data-v-9159aede></i>，<i class="iconfont icon-zidingyi" data-v-9159aede></i>自定义模型文件请上传至<span class="go-bold" data-v-9159aede>backend/model文件夹</span><i class="iconfont icon-wenjianjia" data-v-9159aede></i>下的<span class="go-bold" data-v-9159aede>semantic_segmentation文件夹</span></p>',1),c={key:0,class:"clear-queue"},d=t((()=>(0,a._)("i",{class:"iconfont icon-yunduanshangchuan"},null,-1))),r=t((()=>(0,a._)("div",{class:"el-upload__text"},[(0,a.Uk)(" 将图片拖到此处，或"),(0,a._)("em",null,"点击上传")],-1))),h=t((()=>(0,a._)("div",{class:"el-upload__tip"}," 只能上传一张或多张图片，请在下方上传文件夹 ",-1))),p={class:"prehandle-label container"},u=t((()=>(0,a._)("span",{class:"checkmark"},null,-1))),f=t((()=>(0,a._)("span",{class:"go-bold label-words"},"上传时编辑图片",-1))),m=t((()=>(0,a._)("i",{class:"iconfont icon-crop-full"},null,-1))),g=t((()=>(0,a._)("i",{class:"iconfont icon-tuxingtuxiangchuli"},null,-1))),_=t((()=>(0,a._)("p",null,"图像增强：",-1))),w={class:"prehandle-label container"},k=t((()=>(0,a._)("span",{class:"checkmark"},null,-1))),b=t((()=>(0,a._)("span",{class:"go-bold label-words"},"CLAHE",-1))),v={class:"prehandle-label container"},y=t((()=>(0,a._)("span",{class:"checkmark"},null,-1))),S=t((()=>(0,a._)("span",{class:"go-bold label-words"},"锐化",-1))),C=t((()=>(0,a._)("i",{class:"iconfont icon-agora_AIjiangzao"},null,-1))),U=t((()=>(0,a._)("p",null,"降噪处理：",-1))),W={class:"prehandle-label container"},$=t((()=>(0,a._)("span",{class:"checkmark"},null,-1))),j=t((()=>(0,a._)("span",{class:"go-bold label-words"},"平滑",-1))),L={class:"prehandle-label container"},x=t((()=>(0,a._)("span",{class:"checkmark"},null,-1))),E=t((()=>(0,a._)("span",{class:"go-bold label-words"},"滤波",-1))),A={class:"custom-model"},P={key:0},D={class:"handle-button"},I={key:2},V={key:0},M=t((()=>(0,a._)("div",{id:"sub-title"},[(0,a.Uk)(" CLAHE处理结果预览"),(0,a._)("i",{class:"iconfont icon-dianji"})],-1))),R=[M],Z={key:1},q=t((()=>(0,a._)("div",{id:"sub-title"},[(0,a.Uk)(" 锐化处理结果预览"),(0,a._)("i",{class:"iconfont icon-dianji"})],-1))),H=[q],B=t((()=>(0,a._)("div",{class:"handle-words"}," 原图 ",-1))),G={class:"handle-words"},F=["onClick"],J=t((()=>(0,a._)("i",{class:"iconfont icon-xiazai"},null,-1))),T=[J],z={class:"handle-words"},K=["onClick"],Y=t((()=>(0,a._)("i",{class:"iconfont icon-xiazai"},null,-1))),O=[Y],N=t((()=>(0,a._)("div",{id:"sub-title"},[(0,a.Uk)(" 结果图预览"),(0,a._)("i",{class:"iconfont icon-dianji"})],-1))),Q=t((()=>(0,a._)("p",null,[(0,a._)("span",{class:"go-bold"},"点击图片"),(0,a.Uk)("即可预览 "),(0,a._)("i",{class:"iconfont icon-duigou"}),(0,a._)("span",null,[(0,a._)("span",{class:"go-bold"},"滑轮滚动"),(0,a.Uk)("即可放大缩小")])],-1))),X={class:"go-bold"},ee=t((()=>(0,a._)("span",{class:"hidden-sm-and-down"},"点击刷新",-1))),le=[ee];function se(e,l,s,t,M,q){const J=(0,a.up)("Tabinfor"),Y=(0,a.up)("el-divider"),ee=(0,a.up)("el-button"),se=(0,a.up)("el-upload"),ae=(0,a.up)("el-row"),ie=(0,a.up)("el-radio"),te=(0,a.up)("el-image"),oe=(0,a.up)("el-col"),ne=(0,a.up)("el-card"),ce=(0,a.up)("MyVueCropper"),de=(0,a.up)("el-dialog"),re=(0,a.up)("ImgShow"),he=(0,a.up)("Bottominfor");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(J,null,{left:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(Y),n,(0,a.Wm)(ae,{type:"flex",justify:"space-evenly"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{span:24},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{style:{border:"4px dashed var(--el-border-color)"}},{default:(0,a.w5)((()=>[M.fileList.length?((0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(ee,{type:"primary",class:"btn-animate2 btn-animate__surround",onClick:q.clearQueue},{default:(0,a.w5)((()=>[(0,a.Uk)(" 清空图片 ")])),_:1},8,["onClick"])])):(0,a.kq)("",!0),(0,a.Wm)(se,{ref:"upload","file-list":M.fileList,"onUpdate:fileList":l[0]||(l[0]=e=>M.fileList=e),class:"upload-card",drag:"",action:"#",multiple:"",accpet:".jpg,.jpeg,.png,.JPG,.JPEG","auto-upload":!1,onChange:l[1]||(l[1]=e=>q.beforeUpload(M.fileList[M.fileList.length-1].raw))},{default:(0,a.w5)((()=>[d,r,h])),_:1},8,["file-list"]),(0,a.Wm)(ae,{justify:"center"},{default:(0,a.w5)((()=>[(0,a._)("input",{id:"folder",ref:"uploadFile",type:"file",webkitdirectory:"",directory:"",multiple:"",onChange:l[2]||(l[2]=e=>q.uploadMore())},null,544),(0,a._)("i",{class:"iconfont icon-wenjianshangchuan",onClick:l[3]||(l[3]=(...e)=>q.fileClick&&q.fileClick(...e))},"上传文件夹")])),_:1}),(0,a.Wm)(ae,{justify:"center"},{default:(0,a.w5)((()=>[(0,a._)("p",null,[(0,a._)("label",p,[(0,a._)("input",{ref:"cut",type:"checkbox",onChange:l[4]||(l[4]=e=>q.select())},null,544),u,f,m])])])),_:1}),(0,a.Wm)(ae,{justify:"center",align:"middle"},{default:(0,a.w5)((()=>[g,_,(0,a._)("p",null,[(0,a._)("label",w,[(0,a._)("input",{ref:"clahe",type:"checkbox",onChange:l[5]||(l[5]=e=>q.selectClahe(4))},null,544),k,b])]),(0,a._)("p",null,[(0,a._)("label",v,[(0,a._)("input",{ref:"sharpen",type:"checkbox",onChange:l[6]||(l[6]=e=>q.selectSharpen(4))},null,544),y,S])])])),_:1}),(0,a.Wm)(ae,{justify:"center",align:"middle"},{default:(0,a.w5)((()=>[C,U,(0,a._)("p",null,[(0,a._)("label",W,[(0,a._)("input",{ref:"smooth",type:"checkbox",onChange:l[7]||(l[7]=e=>q.selectSmooth())},null,544),$,j]),(0,a._)("label",L,[(0,a._)("input",{ref:"filter",type:"checkbox",onChange:l[8]||(l[8]=e=>q.selectFilter())},null,544),x,E])])])),_:1}),(0,a.Wm)(ae,{justify:"center"},{default:(0,a.w5)((()=>[(0,a._)("div",A,[(0,a.Uk)(" 可选训练模型： "),0===M.modelPathArr.length?((0,a.wg)(),(0,a.iD)("span",P,"未检测到模型文件，请查看上传目录是否有误")):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.modelPathArr,((e,s)=>((0,a.wg)(),(0,a.j4)(ie,{key:s,modelValue:M.uploadSrc.model_path,"onUpdate:modelValue":l[9]||(l[9]=e=>M.uploadSrc.model_path=e),class:"choose-item",label:e.model_path},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.model_name),1)])),_:2},1032,["modelValue","label"])))),128))])])),_:1}),(0,a._)("div",D,[(0,a.Wm)(ee,{type:"primary",class:"btn-animate btn-animate__shiny",onClick:l[10]||(l[10]=e=>q.upload("地物分类","semantic_segmentation"))},{default:(0,a.w5)((()=>[(0,a.Uk)(" 开始处理 ")])),_:1})]),M.uploadSrc.prehandle?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Y,{key:1})),M.uploadSrc.prehandle?((0,a.wg)(),(0,a.iD)("div",I,[2===M.uploadSrc.prehandle?((0,a.wg)(),(0,a.iD)("div",V,R)):4===M.uploadSrc.prehandle?((0,a.wg)(),(0,a.iD)("div",Z,H)):(0,a.kq)("",!0),(0,a.Wm)(Y),(0,a.Wm)(ae,{justify:"center",gutter:20},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.before,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l},[(0,a.Wm)(te,{src:e,"preview-src-list":[e],"preview-teleported":!0},null,8,["src","preview-src-list"]),B])))),128))])),_:1}),(0,a.Wm)(oe,{md:2,lg:2,xl:2}),2===M.uploadSrc.prehandle?((0,a.wg)(),(0,a.j4)(oe,{key:0,xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.claheImg,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l},[(0,a.Wm)(te,{src:e,"preview-src-list":[e],"preview-teleported":!0},null,8,["src","preview-src-list"]),(0,a._)("div",G,[(0,a.Uk)(" CLAHE处理后 "),(0,a._)("span",{onClick:l=>q.downloadimgWithWords(-1,e,"CLAHE处理图.png")},T,8,F)])])))),128))])),_:1})):(0,a.kq)("",!0),4===M.uploadSrc.prehandle?((0,a.wg)(),(0,a.j4)(oe,{key:1,xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.sharpenImg,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l},[(0,a.Wm)(te,{src:e,"preview-src-list":[e],"preview-teleported":!0},null,8,["src","preview-src-list"]),(0,a._)("div",z,[(0,a.Uk)(" 锐化处理后 "),(0,a._)("span",{onClick:l=>q.downloadimgWithWords(-1,e,"锐化处理图.png")},O,8,K)])])))),128))])),_:1})):(0,a.kq)("",!0)])),_:1})])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(J,null,{left:(0,a.w5)((()=>[N])),_:1}),(0,a.Wm)(Y),(0,a.Wm)(J,null,{left:(0,a.w5)((()=>[Q])),right:(0,a.w5)((()=>[(0,a._)("div",X,[(0,a._)("i",{class:"iconfont icon-shuaxin",style:{"padding-right":"65px"},onClick:l[11]||(l[11]=(...e)=>q.getMore&&q.getMore(...e))},le)])])),_:1}),(0,a.Wm)(de,{modelValue:M.cutVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>M.cutVisible=e),modal:!1,title:"编辑",width:"75%",top:"0"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{fileimg:M.fileimg,funtype:M.funtype,file:M.file,"child-prehandle":M.uploadSrc.prehandle,"child-denoise":M.uploadSrc.denoise,"child-model-path":M.uploadSrc.model_path,onCutChanged:q.notvisible,onChildRefresh:q.getMore},null,8,["fileimg","funtype","file","child-prehandle","child-denoise","child-model-path","onCutChanged","onChildRefresh"])])),_:1},8,["modelValue"]),(0,a.Wm)(re,{"img-arr":M.imgArr},null,8,["img-arr"]),(0,a.Wm)(he)])}s(7658);var ae=s(5893),ie=s(8692),te=s(9450),oe=s(2239),ne=s(9070);function ce(e){if(0===this.fileList.length)4===this.uploadSrc.prehandle?(this.$refs.sharpen.checked=!1,this.uploadSrc.prehandle=0):(this.$refs.sharpen.checked=!1,this.$message.error("请先上传图片"));else if(!0===this.$refs.clahe.checked&&(this.$refs.clahe.checked=!1),!1===this.$refs.sharpen.checked)this.$message.success("取消锐化处理"),this.uploadSrc.prehandle=0;else{this.$message.success("锐化处理"),this.uploadSrc.prehandle=4;let l=new FormData;for(const s of this.fileList)l.append("files",s)||l.append("files",s.raw),l.append("type",e);(0,ie.EE)(l).then((e=>{this.uploadSrc.list=e.data.data.map((e=>ne.Z.BASEURL+e.src)),this.before=this.uploadSrc.list.splice(0,3),this.prePhoto.list=this.before,this.prePhoto.prehandle=4,(0,ie.wZ)(this.prePhoto).then((e=>{this.sharpenImg=e.data.data.map((e=>ne.Z.BASEURL+e))}))})).catch((e=>{}))}}function de(e){if(0===this.fileList.length)2===this.uploadSrc.prehandle?(this.$refs.clahe.checked=!1,this.uploadSrc.prehandle=0):(this.$refs.clahe.checked=!1,this.$message.error("请先上传图片"));else if(!0===this.$refs.sharpen.checked&&(this.$refs.sharpen.checked=!1),!1===this.$refs.clahe.checked)this.$message.success("取消CLAHE处理"),this.uploadSrc.prehandle=0;else{this.$message.success("CLAHE处理"),this.uploadSrc.prehandle=2;let l=new FormData;for(const s of this.fileList)l.append("files",s)||l.append("files",s.raw),l.append("type",e);(0,ie.EE)(l).then((e=>{this.uploadSrc.list=e.data.data.map((e=>ne.Z.BASEURL+e.src)),this.before=this.uploadSrc.list.splice(0,3),this.prePhoto.list=this.before,this.prePhoto.prehandle=2,(0,ie.wZ)(this.prePhoto).then((e=>{this.claheImg=e.data.data.map((e=>ne.Z.BASEURL+e))})).catch((e=>{}))})).catch((e=>{}))}}function re(){!0===this.$refs.smooth.checked&&(this.$refs.smooth.checked=!1),!1===this.$refs.filter.checked?(this.$message.success("取消高斯滤波处理"),this.uploadSrc.denoise=0):(this.$message.success("高斯滤波处理"),this.uploadSrc.denoise=5)}function he(){!0===this.$refs.filter.checked&&(this.$refs.filter.checked=!1),!1===this.$refs.smooth.checked?(this.$message.success("取消平滑处理"),this.uploadSrc.denoise=0):(this.$message.success("平滑处理"),this.uploadSrc.denoise=3)}var pe=s(4764),ue=s(4314),fe=s(2606),me=s(410),ge={name:"Segmentation",components:{ImgShow:pe.Z,Tabinfor:ue.Z,Bottominfor:fe.Z,MyVueCropper:me.Z},beforeRouteEnter(e,l,s){s((e=>{document.querySelector(".el-main").scrollTop=0}))},data(){return{isUpload:!0,canUpload:!0,claheImg:[],sharpenImg:[],before:[],fileimg:"",file:{},isNotCut:!0,cutVisible:!1,fileList:[],funtype:"地物分类",scrollTop:"",fit:"fill",uploadSrc:{list:[],prehandle:0,denoise:0,model_path:""},modelPathArr:[],prePhoto:{list:[],prehandle:0,type:4},imgArr:[]}},watch:{uploadSrc:{handler(e,l){this.uploadSrc=e},deep:!0,immediate:!0}},created(){this.getUploadImg("地物分类"),this.getCustomModel("semantic_segmentation").then((e=>{this.modelPathArr=e.data.data,this.uploadSrc.model_path=this.modelPathArr[0]?.model_path})).catch((e=>{}))},methods:{getImgArrayBuffer:ae.pT,atchDownload:ae.wR,imgUpload:ie.cM,getCustomModel:ie.Xk,historyGetPage:te.G,createSrc:ie.EE,getUploadImg:oe.sw,upload:oe.ws,goCompress:oe.XA,selectSharpen:ce,selectFilter:re,selectSmooth:he,selectClahe:de,downloadimgWithWords:ae.R3,checkUpload(){this.isUpload=0!==this.afterImg.length},clearQueue(){this.fileList=[],this.$message.success("清除成功")},notvisible(){this.cutVisible=!1,this.fileList=[]},uploadMore(){this.beforeUpload(...this.$refs.uploadFile.files),this.canUpload?this.fileList.push(...this.$refs.uploadFile.files):setTimeout((()=>{this.$message.error("检测到您上传的文件夹内存在不符合规范的图片类型")}),1e3)},getMore(){this.getUploadImg("地物分类")},fileClick(){document.querySelector("#folder").click()},beforeUpload(e){this.cutVisible=this.$refs.cut.checked;const l=e.name.substring(e.name.lastIndexOf(".")+1),s=["jpg","jpeg","png","JPG","JPEG"];-1===s.indexOf(l)?(this.$message.error("只允许上传jpg, jpeg, png, JPG, 或JPEG格式,请重新上传"),this.fileList=[],this.cutVisible=!1,this.canUpload=!1):(this.canUpload=!0,this.fileimg=window.URL.createObjectURL(new Blob([e])))},select(){this.isNotCut=this.$refs.cut.checked}}},_e=s(89);const we=(0,_e.Z)(ge,[["render",se],["__scopeId","data-v-9159aede"]]);var ke=we}}]);
//# sourceMappingURL=760.498fbab4.js.map