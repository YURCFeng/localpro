"use strict";(self["webpackChunkgeoview"]=self["webpackChunkgeoview"]||[]).push([[163],{4764:function(e,l,i){i.d(l,{Z:function(){return y}});var s=i(3396),a=i(7139);const t=e=>((0,s.dD)("data-v-45290c92"),e=e(),(0,s.Cn)(),e),n={class:"img-display-box"},o={class:"index-number"},c=t((()=>(0,s._)("div",{class:"img-infor"},[(0,s._)("span",null,"原图")],-1))),d={key:0},r={class:"img-infor"},p=t((()=>(0,s._)("span",null,"预测结果",-1))),h=["onClick"],u=t((()=>(0,s._)("i",{class:"iconfont icon-xiazai"},null,-1))),m=[u],f={key:1,class:"img-index"},g={class:"index-number"};function _(e,l,i,t,u,_){const w=(0,s.up)("el-empty"),k=(0,s.up)("el-divider"),b=(0,s.up)("el-image"),v=(0,s.up)("el-card");return(0,s.wg)(),(0,s.j4)(v,{style:{"margin-bottom":"10px"}},{default:(0,s.w5)((()=>[0===u.childImgArr.length?((0,s.wg)(),(0,s.j4)(w,{key:0,"image-size":200})):(0,s.kq)("",!0),(0,s._)("div",n,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.childImgArr,((e,l)=>((0,s.wg)(),(0,s.iD)("div",{key:l,class:"img-display-item"},[(0,s.Wm)(k,{class:"img-divider"},{default:(0,s.w5)((()=>[(0,s.Uk)(" 第"),(0,s._)("span",o,(0,a.zw)(e.id),1),(0,s.Uk)("组 ")])),_:2},1024),(0,s._)("div",null,[(0,s.Wm)(b,{ref_for:!0,ref:"tableTab",class:"img-display",src:e.before_img,fit:u.fit,lazy:!0,"preview-src-list":[e.before_img],"preview-teleported":!0},null,8,["src","fit","preview-src-list"]),c]),(0,s._)("div",null,["场景分类"!==e.type?((0,s.wg)(),(0,s.iD)("div",d,[(0,s.Wm)(b,{ref_for:!0,ref:"tableTab",class:"img-display",src:e.after_img,fit:u.fit,lazy:!0,"preview-src-list":[e.after_img],"preview-teleported":!0},null,8,["src","fit","preview-src-list"]),(0,s._)("div",r,[p,(0,s._)("span",{onClick:l=>_.downloadimgWithWords(e.id,e.after_img,`${e.type}结果图.png`)},m,8,h)])])):((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("span",g,(0,a.zw)(Object.keys(e.data)[0])+": "+(0,a.zw)(e.data[Object.keys(e.data)]),1)]))])])))),128))])])),_:1})}var w=i(5893),k={name:"Imgshow",props:{imgArr:{type:Array,default(){return[]}}},data(){return{fit:"fill",childImgArr:[]}},mounted(){this.childImgArr=this.imgArr},updated(){this.childImgArr=this.imgArr},methods:{downloadimgWithWords:w.R3}},b=i(89);const v=(0,b.Z)(k,[["render",_],["__scopeId","data-v-45290c92"]]);var y=v},7794:function(e,l,i){i.r(l),i.d(l,{default:function(){return ke}});var s=i(3396),a=i(7139);const t=e=>((0,s.dD)("data-v-9159aede"),e=e(),(0,s.Cn)(),e),n=t((()=>(0,s._)("div",{id:"sub-title"},[(0,s.Uk)(" 地物分类"),(0,s._)("i",{class:"iconfont icon-dianji"})],-1))),o=(0,s.uE)('<p data-v-9159aede> 请上传包含<span class="go-bold" data-v-9159aede>图片的文件夹</span><i class="iconfont icon-wenjianjia" data-v-9159aede></i>或者<span class="go-bold" data-v-9159aede>图片</span><i class="iconfont icon-tupiantianjia" data-v-9159aede></i>，<i class="iconfont icon-zidingyi" data-v-9159aede></i>自定义模型文件请上传至<span class="go-bold" data-v-9159aede>backend/model文件夹</span><i class="iconfont icon-wenjianjia" data-v-9159aede></i>下的<span class="go-bold" data-v-9159aede>semantic_segmentation文件夹</span></p>',1),c={key:0,class:"clear-queue"},d=t((()=>(0,s._)("i",{class:"iconfont icon-yunduanshangchuan"},null,-1))),r=t((()=>(0,s._)("div",{class:"el-upload__text"},[(0,s.Uk)(" 将图片拖到此处，或"),(0,s._)("em",null,"点击上传")],-1))),p=t((()=>(0,s._)("div",{class:"el-upload__tip"}," 只能上传一张或多张图片，请在下方上传文件夹 ",-1))),h={class:"prehandle-label container"},u=t((()=>(0,s._)("span",{class:"checkmark"},null,-1))),m=t((()=>(0,s._)("span",{class:"go-bold label-words"},"上传时编辑图片",-1))),f=t((()=>(0,s._)("i",{class:"iconfont icon-crop-full"},null,-1))),g=t((()=>(0,s._)("i",{class:"iconfont icon-tuxingtuxiangchuli"},null,-1))),_=t((()=>(0,s._)("p",null,"图像增强：",-1))),w={class:"prehandle-label container"},k=t((()=>(0,s._)("span",{class:"checkmark"},null,-1))),b=t((()=>(0,s._)("span",{class:"go-bold label-words"},"CLAHE",-1))),v={class:"prehandle-label container"},y=t((()=>(0,s._)("span",{class:"checkmark"},null,-1))),C=t((()=>(0,s._)("span",{class:"go-bold label-words"},"锐化",-1))),S=t((()=>(0,s._)("i",{class:"iconfont icon-agora_AIjiangzao"},null,-1))),W=t((()=>(0,s._)("p",null,"降噪处理：",-1))),U={class:"prehandle-label container"},$=t((()=>(0,s._)("span",{class:"checkmark"},null,-1))),j=t((()=>(0,s._)("span",{class:"go-bold label-words"},"平滑",-1))),x={class:"prehandle-label container"},A=t((()=>(0,s._)("span",{class:"checkmark"},null,-1))),L=t((()=>(0,s._)("span",{class:"go-bold label-words"},"滤波",-1))),I={class:"custom-model"},D={key:0},E={class:"handle-button"},P={key:2},V={key:0},Z=t((()=>(0,s._)("div",{id:"sub-title"},[(0,s.Uk)(" CLAHE处理结果预览"),(0,s._)("i",{class:"iconfont icon-dianji"})],-1))),z=[Z],R={key:1},q=t((()=>(0,s._)("div",{id:"sub-title"},[(0,s.Uk)(" 锐化处理结果预览"),(0,s._)("i",{class:"iconfont icon-dianji"})],-1))),H=[q],M=t((()=>(0,s._)("div",{class:"handle-words"}," 原图 ",-1))),B={class:"handle-words"},G=["onClick"],T=t((()=>(0,s._)("i",{class:"iconfont icon-xiazai"},null,-1))),F=[T],J={class:"handle-words"},K=["onClick"],O=t((()=>(0,s._)("i",{class:"iconfont icon-xiazai"},null,-1))),Y=[O],N=t((()=>(0,s._)("div",{id:"sub-title"},[(0,s.Uk)(" 结果图预览"),(0,s._)("i",{class:"iconfont icon-dianji"})],-1))),Q=t((()=>(0,s._)("p",null,[(0,s._)("span",{class:"go-bold"},"点击图片"),(0,s.Uk)("即可预览 "),(0,s._)("i",{class:"iconfont icon-duigou"}),(0,s._)("span",null,[(0,s._)("span",{class:"go-bold"},"滑轮滚动"),(0,s.Uk)("即可放大缩小")])],-1))),X={class:"go-bold"},ee=t((()=>(0,s._)("span",{class:"hidden-sm-and-down"},"点击刷新",-1))),le=[ee];function ie(e,l,i,t,Z,q){const T=(0,s.up)("Tabinfor"),O=(0,s.up)("el-divider"),ee=(0,s.up)("el-button"),ie=(0,s.up)("el-upload"),se=(0,s.up)("el-row"),ae=(0,s.up)("el-radio"),te=(0,s.up)("el-image"),ne=(0,s.up)("el-col"),oe=(0,s.up)("el-card"),ce=(0,s.up)("MyVueCropper"),de=(0,s.up)("el-dialog"),re=(0,s.up)("ImgShow"),pe=(0,s.up)("Bottominfor");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(T,null,{left:(0,s.w5)((()=>[n])),_:1}),(0,s.Wm)(O),o,(0,s.Wm)(se,{type:"flex",justify:"space-evenly"},{default:(0,s.w5)((()=>[(0,s.Wm)(ne,{span:24},{default:(0,s.w5)((()=>[(0,s.Wm)(oe,{style:{border:"4px dashed var(--el-border-color)"}},{default:(0,s.w5)((()=>[Z.fileList.length?((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(ee,{type:"primary",class:"btn-animate2 btn-animate__surround",onClick:q.clearQueue},{default:(0,s.w5)((()=>[(0,s.Uk)(" 清空图片 ")])),_:1},8,["onClick"])])):(0,s.kq)("",!0),(0,s.Wm)(ie,{ref:"upload","file-list":Z.fileList,"onUpdate:fileList":l[0]||(l[0]=e=>Z.fileList=e),class:"upload-card",drag:"",action:"#",multiple:"",accpet:".jpg,.jpeg,.png,.JPG,.JPEG","auto-upload":!1,onChange:l[1]||(l[1]=e=>q.beforeUpload(Z.fileList[Z.fileList.length-1].raw))},{default:(0,s.w5)((()=>[d,r,p])),_:1},8,["file-list"]),(0,s.Wm)(se,{justify:"center"},{default:(0,s.w5)((()=>[(0,s._)("input",{id:"folder",ref:"uploadFile",type:"file",webkitdirectory:"",directory:"",multiple:"",onChange:l[2]||(l[2]=e=>q.uploadMore())},null,544),(0,s._)("i",{class:"iconfont icon-wenjianshangchuan",onClick:l[3]||(l[3]=(...e)=>q.fileClick&&q.fileClick(...e))},"上传文件夹")])),_:1}),(0,s.Wm)(se,{justify:"center"},{default:(0,s.w5)((()=>[(0,s._)("p",null,[(0,s._)("label",h,[(0,s._)("input",{ref:"cut",type:"checkbox",onChange:l[4]||(l[4]=e=>q.select())},null,544),u,m,f])])])),_:1}),(0,s.Wm)(se,{justify:"center",align:"middle"},{default:(0,s.w5)((()=>[g,_,(0,s._)("p",null,[(0,s._)("label",w,[(0,s._)("input",{ref:"clahe",type:"checkbox",onChange:l[5]||(l[5]=e=>q.selectClahe(4))},null,544),k,b])]),(0,s._)("p",null,[(0,s._)("label",v,[(0,s._)("input",{ref:"sharpen",type:"checkbox",onChange:l[6]||(l[6]=e=>q.selectSharpen(4))},null,544),y,C])])])),_:1}),(0,s.Wm)(se,{justify:"center",align:"middle"},{default:(0,s.w5)((()=>[S,W,(0,s._)("p",null,[(0,s._)("label",U,[(0,s._)("input",{ref:"smooth",type:"checkbox",onChange:l[7]||(l[7]=e=>q.selectSmooth())},null,544),$,j]),(0,s._)("label",x,[(0,s._)("input",{ref:"filter",type:"checkbox",onChange:l[8]||(l[8]=e=>q.selectFilter())},null,544),A,L])])])),_:1}),(0,s.Wm)(se,{justify:"center"},{default:(0,s.w5)((()=>[(0,s._)("div",I,[(0,s.Uk)(" 可选训练模型： "),0===Z.modelPathArr.length?((0,s.wg)(),(0,s.iD)("span",D,"未检测到模型文件，请查看上传目录是否有误")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.modelPathArr,((e,i)=>((0,s.wg)(),(0,s.j4)(ae,{key:i,modelValue:Z.uploadSrc.model_path,"onUpdate:modelValue":l[9]||(l[9]=e=>Z.uploadSrc.model_path=e),class:"choose-item",label:e.model_path},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.model_name),1)])),_:2},1032,["modelValue","label"])))),128))])])),_:1}),(0,s._)("div",E,[(0,s.Wm)(ee,{type:"primary",class:"btn-animate btn-animate__shiny",onClick:l[10]||(l[10]=e=>q.upload("地物分类","semantic_segmentation"))},{default:(0,s.w5)((()=>[(0,s.Uk)(" 开始处理 ")])),_:1})]),Z.uploadSrc.prehandle?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(O,{key:1})),Z.uploadSrc.prehandle?((0,s.wg)(),(0,s.iD)("div",P,[2===Z.uploadSrc.prehandle?((0,s.wg)(),(0,s.iD)("div",V,z)):4===Z.uploadSrc.prehandle?((0,s.wg)(),(0,s.iD)("div",R,H)):(0,s.kq)("",!0),(0,s.Wm)(O),(0,s.Wm)(se,{justify:"center",gutter:20},{default:(0,s.w5)((()=>[(0,s.Wm)(ne,{xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.before,((e,l)=>((0,s.wg)(),(0,s.iD)("div",{key:l},[(0,s.Wm)(te,{src:e,"preview-src-list":[e],"preview-teleported":!0},null,8,["src","preview-src-list"]),M])))),128))])),_:1}),(0,s.Wm)(ne,{md:2,lg:2,xl:2}),2===Z.uploadSrc.prehandle?((0,s.wg)(),(0,s.j4)(ne,{key:0,xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.claheImg,((e,l)=>((0,s.wg)(),(0,s.iD)("div",{key:l},[(0,s.Wm)(te,{src:e,"preview-src-list":[e],"preview-teleported":!0},null,8,["src","preview-src-list"]),(0,s._)("div",B,[(0,s.Uk)(" CLAHE处理后 "),(0,s._)("span",{onClick:l=>q.downloadimgWithWords(-1,e,"CLAHE处理图.png")},F,8,G)])])))),128))])),_:1})):(0,s.kq)("",!0),4===Z.uploadSrc.prehandle?((0,s.wg)(),(0,s.j4)(ne,{key:1,xs:24,sm:24,md:6,lg:6,xl:6},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.sharpenImg,((e,l)=>((0,s.wg)(),(0,s.iD)("div",{key:l},[(0,s.Wm)(te,{src:e,"preview-src-list":[e],"preview-teleported":!0},null,8,["src","preview-src-list"]),(0,s._)("div",J,[(0,s.Uk)(" 锐化处理后 "),(0,s._)("span",{onClick:l=>q.downloadimgWithWords(-1,e,"锐化处理图.png")},Y,8,K)])])))),128))])),_:1})):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(T,null,{left:(0,s.w5)((()=>[N])),_:1}),(0,s.Wm)(O),(0,s.Wm)(T,null,{left:(0,s.w5)((()=>[Q])),right:(0,s.w5)((()=>[(0,s._)("div",X,[(0,s._)("i",{class:"iconfont icon-shuaxin",style:{"padding-right":"65px"},onClick:l[11]||(l[11]=(...e)=>q.getMore&&q.getMore(...e))},le)])])),_:1}),(0,s.Wm)(de,{modelValue:Z.cutVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>Z.cutVisible=e),modal:!1,title:"编辑",width:"75%",top:"0"},{default:(0,s.w5)((()=>[(0,s.Wm)(ce,{fileimg:Z.fileimg,funtype:Z.funtype,file:Z.file,"child-prehandle":Z.uploadSrc.prehandle,"child-denoise":Z.uploadSrc.denoise,"child-model-path":Z.uploadSrc.model_path,onCutChanged:q.notvisible,onChildRefresh:q.getMore},null,8,["fileimg","funtype","file","child-prehandle","child-denoise","child-model-path","onCutChanged","onChildRefresh"])])),_:1},8,["modelValue"]),(0,s.Wm)(re,{"img-arr":Z.imgArr},null,8,["img-arr"]),(0,s.Wm)(pe)])}i(7658);var se=i(5893),ae=i(8692),te=i(9450),ne=i(2239),oe=i(9070);function ce(e){if(0===this.fileList.length)4===this.uploadSrc.prehandle?(this.$refs.sharpen.checked=!1,this.uploadSrc.prehandle=0):(this.$refs.sharpen.checked=!1,this.$message.error("请先上传图片"));else if(!0===this.$refs.clahe.checked&&(this.$refs.clahe.checked=!1),!1===this.$refs.sharpen.checked)this.$message.success("取消锐化处理"),this.uploadSrc.prehandle=0;else{this.$message.success("锐化处理"),this.uploadSrc.prehandle=4;let l=new FormData;for(const i of this.fileList)l.append("files",i)||l.append("files",i.raw),l.append("type",e);(0,ae.EE)(l).then((e=>{this.uploadSrc.list=e.data.data.map((e=>oe.Z.BASEURL+e.src)),this.before=this.uploadSrc.list.splice(0,3),this.prePhoto.list=this.before,this.prePhoto.prehandle=4,(0,ae.wZ)(this.prePhoto).then((e=>{this.sharpenImg=e.data.data.map((e=>oe.Z.BASEURL+e))}))})).catch((e=>{}))}}function de(e){if(0===this.fileList.length)2===this.uploadSrc.prehandle?(this.$refs.clahe.checked=!1,this.uploadSrc.prehandle=0):(this.$refs.clahe.checked=!1,this.$message.error("请先上传图片"));else if(!0===this.$refs.sharpen.checked&&(this.$refs.sharpen.checked=!1),!1===this.$refs.clahe.checked)this.$message.success("取消CLAHE处理"),this.uploadSrc.prehandle=0;else{this.$message.success("CLAHE处理"),this.uploadSrc.prehandle=2;let l=new FormData;for(const i of this.fileList)l.append("files",i)||l.append("files",i.raw),l.append("type",e);(0,ae.EE)(l).then((e=>{this.uploadSrc.list=e.data.data.map((e=>oe.Z.BASEURL+e.src)),this.before=this.uploadSrc.list.splice(0,3),this.prePhoto.list=this.before,this.prePhoto.prehandle=2,(0,ae.wZ)(this.prePhoto).then((e=>{this.claheImg=e.data.data.map((e=>oe.Z.BASEURL+e))})).catch((e=>{}))})).catch((e=>{}))}}function re(){!0===this.$refs.smooth.checked&&(this.$refs.smooth.checked=!1),!1===this.$refs.filter.checked?(this.$message.success("取消高斯滤波处理"),this.uploadSrc.denoise=0):(this.$message.success("高斯滤波处理"),this.uploadSrc.denoise=5)}function pe(){!0===this.$refs.filter.checked&&(this.$refs.filter.checked=!1),!1===this.$refs.smooth.checked?(this.$message.success("取消平滑处理"),this.uploadSrc.denoise=0):(this.$message.success("平滑处理"),this.uploadSrc.denoise=3)}var he=i(4764),ue=i(4314),me=i(2606),fe=i(410),ge={name:"Segmentation",components:{ImgShow:he.Z,Tabinfor:ue.Z,Bottominfor:me.Z,MyVueCropper:fe.Z},beforeRouteEnter(e,l,i){i((e=>{document.querySelector(".el-main").scrollTop=0}))},data(){return{isUpload:!0,canUpload:!0,claheImg:[],sharpenImg:[],before:[],fileimg:"",file:{},isNotCut:!0,cutVisible:!1,fileList:[],funtype:"地物分类",scrollTop:"",fit:"fill",uploadSrc:{list:[],prehandle:0,denoise:0,model_path:""},modelPathArr:[],prePhoto:{list:[],prehandle:0,type:4},imgArr:[]}},watch:{uploadSrc:{handler(e,l){this.uploadSrc=e},deep:!0,immediate:!0}},created(){this.getUploadImg("地物分类"),this.getCustomModel("semantic_segmentation").then((e=>{this.modelPathArr=e.data.data,this.uploadSrc.model_path=this.modelPathArr[0]?.model_path})).catch((e=>{}))},methods:{getImgArrayBuffer:se.pT,atchDownload:se.wR,imgUpload:ae.cM,getCustomModel:ae.Xk,historyGetPage:te.G,createSrc:ae.EE,getUploadImg:ne.sw,upload:ne.ws,goCompress:ne.XA,selectSharpen:ce,selectFilter:re,selectSmooth:pe,selectClahe:de,downloadimgWithWords:se.R3,checkUpload(){this.isUpload=0!==this.afterImg.length},clearQueue(){this.fileList=[],this.$message.success("清除成功")},notvisible(){this.cutVisible=!1,this.fileList=[]},uploadMore(){this.beforeUpload(...this.$refs.uploadFile.files),this.canUpload?this.fileList.push(...this.$refs.uploadFile.files):setTimeout((()=>{this.$message.error("检测到您上传的文件夹内存在不符合规范的图片类型")}),1e3)},getMore(){this.getUploadImg("地物分类")},fileClick(){document.querySelector("#folder").click()},beforeUpload(e){this.cutVisible=this.$refs.cut.checked;const l=e.name.substring(e.name.lastIndexOf(".")+1),i=["jpg","jpeg","png","JPG","JPEG"];-1===i.indexOf(l)?(this.$message.error("只允许上传jpg, jpeg, png, JPG, 或JPEG格式,请重新上传"),this.fileList=[],this.cutVisible=!1,this.canUpload=!1):(this.canUpload=!0,this.fileimg=window.URL.createObjectURL(new Blob([e])))},select(){this.isNotCut=this.$refs.cut.checked}}},_e=i(89);const we=(0,_e.Z)(ge,[["render",ie],["__scopeId","data-v-9159aede"]]);var ke=we}}]);
//# sourceMappingURL=163.38bf440e.js.map